---
title: "abundance_plot"
author: "chentao"
date: "2023-12-15"
output: html_document
---

## Abundance_Plot

The following code is used to visualize the results generated by step3-01-Abundance

## Load the required package

```{r}
library(ggplot2)
```

## Read data

```{r}
df_W_R = read.table("../data/T_genus_stack_plot.txt",header = TRUE, sep = "\t",row.names = NULL)
df_W_R = df_W_R[-1]
df_W_R
```

## Plots

You can also embed plots, for example:

```{r,fig.width=5, fig.height=4, dpi=300}
# 绘制堆叠柱形图
p = ggplot(df_W_R, aes(x = category, y = value, fill = reorder(subcategory,value))) +
  geom_bar(stat = "identity", position = "stack")+
  theme(axis.text.x = element_text(size = 9))+
  scale_fill_manual(values = rainbow(nrow(df_W_R)/2,alpha = 0.8))+
  guides(fill=guide_legend(title = "",ncol = 2))+
  ylab("Relative Abundances")+
  theme(axis.title.y = element_text(size = 12))+
  xlab("")+
  theme(legend.key.size = unit(0.6, "lines"))+
  theme(legend.text = element_text(size = 8))
p
```
